(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){e.exports=n(303)},303:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(19),r=n.n(o),l=n(16),c=n(17),s=n(23),m=n(22),u=n(24),d=n(128),g=n.n(d),p=n(125),h=n.n(p),f=n(27),E=n.n(f),b=n(37),v=n.n(b),y=n(38),w=n.n(y),k=JSON.parse(window.localStorage.getItem("vemail")),S=function(){function e(){var t=this;Object(l.a)(this,e),k&&(this.isRecording=!1,this.result=new Promise(function(e){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(n){t.mediaRecorder=new MediaRecorder(n),t.audioChunks=[],t.mediaRecorder.addEventListener("dataavailable",function(e){t.audioChunks.push(e.data)}),t.mediaRecorder.addEventListener("stop",function(){var n=new Blob(t.audioChunks),a=new FileReader;a.readAsDataURL(n),a.onloadend=function(){e(a.result)}})})}))}return Object(c.a)(e,[{key:"start",value:function(){k&&!this.isRecording&&(this.mediaRecorder.start(),this.isRecording=!0,console.log("Starting recording..."))}},{key:"stop",value:function(){k&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1,console.log("Stopping recording..."))}},{key:"base64Recording",get:function(){return this.result}}]),e}(),C=JSON.parse(window.localStorage.getItem("recognition")),I=function(){function e(){if(Object(l.a)(this,e),this.message="",this.isRecording=!1,C)try{this.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,this.recognition=new this.SpeechRecognition}catch(t){console.error(t),alert("Your browser does not support voice recognition.")}}return Object(c.a)(e,[{key:"init",value:function(e){var t=this;C&&(this.recognition.continuous=!0,this.recognition.onresult=function(n){var a=n.resultIndex,i=n.results[a][0].transcript;t.message+=i,e&&e()})}},{key:"start",value:function(e){C&&!this.isRecording&&(this.init(function(){return!!e&&e()}),this.recognition.start(),this.isRecording=!0,console.log("Starting voice recognition..."))}},{key:"stop",value:function(){if(C&&this.isRecording)return this.recognition.stop(),this.isRecording=!1,console.log("Stopping voice recognition..."),this.message}},{key:"transcript",get:function(){return this.message},set:function(e){this.message=e}}]),e}(),O=n(113),N=n.n(O),j=n(78),R=n.n(j),T=n(21),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={content:""},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"send",value:function(){this.props.send(document.getElementById("recipient").value,document.getElementById("compose-body").value,this.mediaRecorder.base64Recording)}},{key:"render",value:function(){var e=this,t=this.props.classes;this.mediaRecorder=new S;var n=new I;return i.a.createElement(v.a,{className:t.dialog,open:this.props.open,fullScreen:!0,onClose:function(){return e.props.onClose()},onEntered:function(){return setTimeout(function(){e.mediaRecorder.start(),n.start()},2e3)}},i.a.createElement(w.a,{className:t.dialogTitle},"Compose Email"),i.a.createElement("div",{className:t.dialog},i.a.createElement(R.a,{autoFocus:!0,fullWidth:!0,variant:"outlined",rows:"1",placeholder:"To:",id:"recipient"}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(R.a,{fullWidth:!0,multiline:!0,variant:"outlined",rows:"20",id:"compose-body",value:this.state.content,onChange:function(){return e.setState({content:document.getElementById("compose-body").value})},placeholder:"Message"}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(E.a,{variant:"outlined",color:"secondary",id:"btn-send",onClick:function(){e.mediaRecorder.stop(),e.setState({content:n.stop()}),e.send()}},i.a.createElement(N.a,null),"\u2003Send Email")))}}]),t}(i.a.Component),D=Object(T.withStyles)(function(e){return{dialog:{padding:5*e.spacing.unit,zIndex:2e3},dialogTitle:{fontSize:"1.5em"}}})(x),A=n(124),B=n.n(A),z=n(32),M=n.n(z),J=n(127),F=n.n(J),L=n(77),V=n.n(L),U=n(58),W=n.n(U),P=n(59),H=n.n(P),Y=n(60),K=n.n(Y),X=n(121),Q=n.n(X),Z=n(118),_=n.n(Z),q=n(120),G=n.n(q),$=n(15),ee=n.n($),te=n(29),ne=n.n(te),ae=n(115),ie=n.n(ae),oe=n(79),re=n.n(oe),le=n(117),ce=n.n(le),se=n(116),me=n.n(se),ue=n(13),de=n.n(ue),ge=n(114),pe=n.n(ge),he=JSON.parse(window.localStorage.getItem("tts"));function fe(e){he&&pe.a.speak(e,"US English Female",{rate:.75})}var Ee=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).ok="\n      Dear ".concat(n.props.from,",\n      \r\n\n\n      Sounds great!"),n.no="\n      Dear ".concat(n.props.from,",\n      \r\n\n\n      No, sorry. I don't think so."),n.maybe="\n      Dear ".concat(n.props.from,",\n      "),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"entered",value:function(){document.getElementsByClassName("mail-body")[0].innerHTML=this.props.data}},{key:"send",value:function(e){var t=this;document.getElementById("btn-compose").click(),setTimeout(function(){document.getElementById("recipient").value=t.props.address.substring(0,t.props.address.length-1),document.getElementById("recipient").setAttribute("disabled","true"),document.getElementById("compose-body").value=e,document.getElementById("compose-body").setAttribute("disabled","true"),setTimeout(function(){document.getElementById("btn-send").click()},2e3)},1e3)}},{key:"render",value:function(){var e=this,n=this.props.classes;return i.a.createElement(v.a,{className:n.dialog,open:this.props.open,fullScreen:!0,onClose:function(){return e.props.onClose()},onEntered:function(){return e.entered()}},i.a.createElement(w.a,{className:n.dialogTitle,onClick:function(){return fe(e.props.subject)}},this.props.subject),i.a.createElement("div",{className:"".concat(n.dialog," mail-body"),onClick:function(){return t.getAllText()},onMouseUp:function(){return t.getSelectedText()}}),i.a.createElement(ee.a,{container:!0,spacing:8,className:n.grid},i.a.createElement(ee.a,{item:!0,sm:12},i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h3"},i.a.createElement(ie.a,{className:n.flashIcon}),"Quick Reply"),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement(ee.a,{item:!0,sm:1},i.a.createElement(ne.a,{"aria-label":"Ok",color:"primary",onClick:function(){return e.send(e.ok)}},i.a.createElement(me.a,{className:n.replyIcon}))),i.a.createElement(ee.a,{item:!0,sm:1},i.a.createElement(ne.a,{"aria-label":"No",color:"primary",onClick:function(){return e.send(e.no)}},i.a.createElement(ce.a,{className:n.replyIcon}))),i.a.createElement(ee.a,{item:!0,sm:1},i.a.createElement(ne.a,{"aria-label":"Maybe",color:"primary",onClick:function(){return e.send(e.maybe)}},i.a.createElement(re.a,{className:n.replyIcon}))),i.a.createElement(ee.a,{item:!0,sm:1},i.a.createElement(ne.a,{"aria-label":"Maybe",color:"primary",onClick:function(){return e.send("test")}},i.a.createElement(re.a,{className:n.replyIcon})))))}}],[{key:"getAllText",value:function(){fe(document.getElementsByClassName("mail-body")[0].innerText)}},{key:"getSelectedText",value:function(){var e="";window.getSelection&&(e=window.getSelection().toString()),fe(e)}}]),t}(i.a.Component),be=Object(T.withStyles)(function(e){return{dialog:{padding:5*e.spacing.unit,zIndex:2e3},dialogTitle:{fontSize:"30pt"},flashIcon:{fontSize:"36pt"},grid:{margin:10,textAlign:"center"},replyIcon:{fontSize:"24pt"}}})(Ee),ve=n(119),ye=n.n(ve),we=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={open:!1},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){this.setState({open:e})}},{key:"render",value:function(){var e=this,n=this.props.classes;return this.from=this.props.payload.headers.filter(function(e){return"From"===e.name})[0].value.split("<"),this.subject=this.props.payload.headers.filter(function(e){return"Subject"===e.name})[0].value,this.data=atob(t.mime(this.props.payload).replace(/_/g,"/").replace(/-/g,"+")),this.props.mailData("From ".concat(this.from[0],". ").concat(this.subject,".")),i.a.createElement(_.a,{raised:!0,className:n.card},i.a.createElement(de.a,{variant:"h3",onClick:function(){return fe("From ".concat(e.from[0]))}},"From: ",this.from[0]),i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h4",onClick:function(){return fe(e.from[1])}},"<".concat(this.from[1])),i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h2",onClick:function(){return fe(e.subject)}},"".concat(this.subject)),i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h5",onClick:function(){return fe(t.htmlDecode(e.props.snippet))}},t.htmlDecode(this.props.snippet),"..."),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(ee.a,{container:!0,spacing:24},i.a.createElement(ee.a,{item:!0,sm:9},i.a.createElement(E.a,{variant:"contained",onClick:function(){e.handleClick(!0),fe("Open email")},size:"large",color:"secondary",fullWidth:!0},i.a.createElement(ye.a,null),"\u2003 Open Email")),i.a.createElement(ee.a,{item:!0,sm:3},i.a.createElement(ne.a,{"aria-label":"Delete",color:"primary",onClick:function(){return e.props.trash()}},i.a.createElement(G.a,{fontSize:"large"})))),i.a.createElement(be,{open:this.state.open,onClose:function(){return e.handleClick(!1)},subject:this.subject,data:this.data,from:this.from[0],address:this.from[1]}))}}],[{key:"htmlDecode",value:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}},{key:"mime",value:function(e){return e.body.data||t.mime(e.parts.filter(function(e){return"text/html"===e.mimeType||"multipart/alternative"===e.mimeType||"multipart/related"===e.mimeType})[0])}}]),t}(i.a.Component),ke=Object(T.withStyles)(function(e){return{card:{padding:5*e.spacing.unit},date:{lineHeight:2}}})(we),Se=["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],Ce=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={mail:i.a.createElement(Q.a,{color:"secondary"})},n.emailCount=0,n.compiled="",n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{window.gapi.load("client:auth2",function(){e.init()})}catch(t){console.error(t),alert("Something went wrong. Try refreshing the page?"),this.setState({mail:i.a.createElement(de.a,{variant:"h2",onClick:function(){return fe("Unable to fetch emails")}},"Unable to fetch emails.")})}}},{key:"init",value:function(){var e=this;window.gapi.client.init({apiKey:"AIzaSyAnDiNaAU8T2W75ynyVt-Dz8ebMxD30s1I",clientId:"98686281361-8upucg52mkqe70nv3j9evlc9kim8ki56.apps.googleusercontent.com",discoveryDocs:Se,scope:"https://www.googleapis.com/auth/gmail.modify"}).then(function(){window.gapi.auth2.getAuthInstance().isSignedIn.get()&&e.getMessages(),e.props.isLogin(window.gapi.auth2.getAuthInstance().isSignedIn.get()),window.gapi.client.gmail.users.getProfile({userId:"me"}).then(function(t){e.props.getEmail(JSON.parse(t.body))});try{document.getElementById("btn-login").onclick=t.login}catch(n){}try{document.getElementById("btn-logout").onclick=t.logout}catch(n){}})}},{key:"getMessages",value:function(){var e=this;window.gapi.client.gmail.users.messages.list({userId:"me",labelIds:["INBOX"]}).then(function(n){var a=n.result.messages,o=[];a.forEach(function(n,r){window.gapi.client.gmail.users.messages.get({userId:"me",id:n.id}).then(function(n){o.push(n.result),r+1===a.length&&(o.length!==a.length&&window.location.reload(),o.sort(function(e,t){return t.internalDate-e.internalDate}),e.setState({mail:o.map(function(n,o){return i.a.createElement("div",{key:"preview-".concat(o)},i.a.createElement(ke,{snippet:n.snippet,payload:n.payload,trash:function(){return t.trash(a[o].id)},mailData:function(t){return e.compile(t)}}),i.a.createElement("br",null),i.a.createElement("br",null))})}))})})})}},{key:"compile",value:function(e){this.emailCount++,this.compiled+="Email number ".concat(this.emailCount,": ").concat(e," "),this.props.mailData(this.compiled)}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.mail)}}],[{key:"login",value:function(){window.gapi.auth2.getAuthInstance().signIn()}},{key:"logout",value:function(){window.gapi.auth2.getAuthInstance().signOut()}},{key:"trash",value:function(e){window.gapi.client.gmail.users.messages.trash({userId:"me",id:e}).then(function(){return window.location.reload()})}}]),t}(i.a.Component),Ie=n(123),Oe=n.n(Ie),Ne=n(122),je=n.n(Ne),Re=n(57),Te=n.n(Re),xe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).storage=window.localStorage,n.storage.getItem("tts")||n.storage.setItem("tts",!1),n.storage.getItem("recognition")||n.storage.setItem("recognition",!1),n.storage.getItem("vemail")||n.storage.setItem("vemail",!1),n.state={tts:n.storage.getItem("tts"),recognition:n.storage.getItem("recognition"),vemail:n.storage.getItem("vemail")},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement(v.a,{className:t.dialog,open:this.props.open,fullScreen:!0,onClose:function(){return e.props.onClose()}},i.a.createElement(w.a,{className:t.dialogTitle},"Settings"),i.a.createElement("div",{className:t.dialog},i.a.createElement(ee.a,{container:!0,spacing:24,className:t.grid},i.a.createElement(ee.a,{item:!0,sm:6},i.a.createElement(de.a,{variant:"h4"},"Text-to-Speech"),i.a.createElement(Te.a,{checked:JSON.parse(this.state.tts),onChange:function(t,n){e.storage.setItem("tts",n),e.setState({tts:e.storage.getItem("tts")})}})),i.a.createElement(ee.a,{item:!0,sm:6},i.a.createElement(de.a,{variant:"h4"},"Voice Recognition"),i.a.createElement(Te.a,{checked:JSON.parse(this.state.recognition),onChange:function(t,n){e.storage.setItem("recognition",n),e.setState({recognition:e.storage.getItem("recognition")})}}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(ee.a,{container:!0,spacing:24,className:t.grid},i.a.createElement(ee.a,{item:!0,sm:6},i.a.createElement(de.a,{variant:"h4"},"Voice Emails"),i.a.createElement(Te.a,{checked:JSON.parse(this.state.vemail),onChange:function(t,n){e.storage.setItem("vemail",n),e.setState({vemail:e.storage.getItem("vemail")})}}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(E.a,{color:"primary",variant:"outlined",onClick:function(){return window.location.reload()},className:t.btnApply},i.a.createElement(je.a,null),"\u2003Apply")))}}]),t}(i.a.Component),De=Object(T.withStyles)(function(e){return{btnApply:{position:"fixed"},dialog:{padding:5*e.spacing.unit,zIndex:2e3},dialogTitle:{fontSize:"1.5em"},grid:{textAlign:"center"}}})(xe),Ae=n(80),Be=n.n(Ae),ze=n(126),Me=n.n(ze),Je=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).recognition=new I,n.isRecording=!1,n.emailCount=0,n.state={auth:null,compose:!1,settings:!1,recognition:JSON.parse(window.localStorage.getItem("recognition"))?i.a.createElement("div",null,i.a.createElement("div",{className:n.props.classes.toolbar}),i.a.createElement(M.a,null),i.a.createElement(W.a,{button:!0,onClick:function(){fe("Voice Command"),n.handleRecognition()}},i.a.createElement(H.a,null,i.a.createElement(Oe.a,{className:n.props.classes.icon})),i.a.createElement(K.a,null,i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h3",color:"inherit",className:n.props.classes.bold},"Voice Command"),i.a.createElement("br",null))),i.a.createElement(M.a,null)):null},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"login",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.setState({auth:i.a.createElement(E.a,{variant:"contained",color:"secondary",id:"btn-logout",className:this.props.classes.auth,onClick:function(){fe("Sign out"),setTimeout(function(){return window.location.reload()},3e3)}},"Sign Out")}):this.setState({auth:i.a.createElement(E.a,{variant:"contained",color:"secondary",id:"btn-login",className:this.props.classes.auth,onClick:function(){fe("Sign in")}},"Sign In")})}},{key:"handleCompose",value:function(e){this.setState({compose:e})}},{key:"handleSettings",value:function(e){this.setState({settings:e})}},{key:"getEmail",value:function(e){this.address=e.emailAddress}},{key:"send",value:function(e,t,n){this.emailContent="Content-Type: text/plain\r\nFrom: ".concat(this.address,"\r\nTo: ").concat(e,"\r\nSubject: Email from ").concat(this.address,"\r\nReply-To: ").concat(this.address,"\r\n\r\n").concat(t,"\nSent with AbleMail."),this.gmailSend()}},{key:"gmailSend",value:function(){window.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:btoa(this.emailContent).replace(/\+/g,"-").replace(/\//g,"_")}}).then(function(){return setTimeout(function(){return window.location.reload()},500)})}},{key:"handleRecognition",value:function(){var e=this;this.isRecording?this.recognition.stop():setTimeout(function(){e.recognition.start(function(){var t=e.recognition.transcript.toLowerCase();switch(!0){case/compose/.test(t):document.getElementById("btn-compose").click(),e.recognition.transcript="",e.recognition.stop();break;case/read emails/.test(t):fe("You have ".concat(e.emailCount," emails. ").concat(e.mailData," That's all of your emails.")),e.recognition.transcript="",e.recognition.stop()}})},2e3),this.isRecording=!this.isRecording}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement("div",{className:t.body},i.a.createElement(B.a,null),i.a.createElement(h.a,{className:t.appBar},i.a.createElement(Me.a,null,i.a.createElement(De,{open:this.state.settings,onClose:function(){return e.handleSettings(!1)}}),i.a.createElement(E.a,{variant:"outlined",color:"secondary",className:t.settings,onClick:function(){e.handleSettings(!0),fe("Settings")}},i.a.createElement(Be.a,null),"\u2003Coach's Settings"),i.a.createElement("img",{onClick:function(){return fe("AbleMail")},src:"https://lh3.googleusercontent.com/QXgAJzNC6BONPxSwpDZN5K1aS8klswHmkVwFCoZbYnEw9KvEoNgOrlteo30X2o3Oy3aOWkfjl0x-oVBy6jEf=w1440-h820-rw",alt:"AbleMail"}),this.state.auth)),i.a.createElement(F.a,{variant:"permanent",classes:{paper:t.drawerPaper},className:t.drawer},i.a.createElement(V.a,{component:"nav"},i.a.createElement("div",{className:t.toolbar}),i.a.createElement(M.a,null),i.a.createElement(W.a,{button:!0,onClick:function(){e.recognition.stop(),e.handleCompose(!0),fe("Compose email")},id:"btn-compose"},i.a.createElement(H.a,null,i.a.createElement(g.a,{className:t.icon})),i.a.createElement(K.a,null,i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h3",color:"inherit",className:t.bold},"Compose"),i.a.createElement("br",null))),i.a.createElement(M.a,null),this.state.recognition,i.a.createElement("div",{className:t.toolbar}),i.a.createElement(M.a,null),i.a.createElement(W.a,{button:!0,onClick:function(){return fe("Settings")}},i.a.createElement(H.a,null,i.a.createElement(Be.a,{className:t.icon})),i.a.createElement(K.a,null,i.a.createElement("br",null),i.a.createElement(de.a,{variant:"h3",color:"inherit",className:t.bold},"Settings"),i.a.createElement("br",null))),i.a.createElement(M.a,null))),i.a.createElement("main",{className:t.content},i.a.createElement("div",{className:t.toolbar},i.a.createElement(Ce,{isLogin:function(t){return e.login(t)},mailData:function(t){e.mailData=t,e.emailCount++},getEmail:function(t){return e.getEmail(t)}}),i.a.createElement(D,{open:this.state.compose,onClose:function(){return e.handleCompose(!1)},send:function(t,n,a){return e.send(t,n,a)}}))))}}]),t}(i.a.Component),Fe=Object(T.withStyles)(function(e){return{appBar:{zIndex:1400,alignItems:"center"},auth:{position:"absolute",right:"-40vw"},body:{height:"100vh",margin:0,overflow:"hidden",width:"100vw",display:"flex"},bold:{fontWeight:"bold"},content:{flexGrow:1,padding:12.5*e.spacing.unit,overflowY:"scroll"},drawer:{flexShrink:0,width:360},drawerPaper:{width:360},icon:{fontSize:"40pt"},settings:{position:"absolute",left:"-40vw"},toolbar:e.mixins.toolbar}})(Je);r.a.render(i.a.createElement(Fe,null),document.getElementById("root"))}},[[129,2,1]]]);
//# sourceMappingURL=main.1576bd3c.chunk.js.map